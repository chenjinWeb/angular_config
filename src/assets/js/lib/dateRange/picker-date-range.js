!function(t){function e(s){if(i[s])return i[s].exports;var a=i[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";function s(t,e){e.parentNode.insertBefore(t,e.nextSibling)}Object.defineProperty(e,"__esModule",{value:!0}),i(1),Date.prototype.calendar=function(t,e){switch(t){case 1:var i=this.getDate();return this.setDate(i+e),this;case 2:var s=this.getMonth();return this.setMonth(s+e),this;case 3:var a=this.getFullYear();return this.setFullYear(a+e),this;case 4:var n=this.getHours();return this.setHours(n+e),this;case 5:var o=this.getMinutes();return this.setMinutes(o+e),this;case 6:var r=this.getSeconds();return this.setSeconds(r+e),this}},Date.prototype.formatDate=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in e)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return t};var a=function(){function t(){}return t.listen=function(t,e,i){var s=null;switch(t){case"window":s=self;break;case"document":s=self.document;break;case"body":s=self.document.body}return s.addEventListener(e,i),function(){s.removeEventListener(e,i)}},t.addClass=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];t.classList&&t.classList.add(e)},t.removeClass=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];t.classList&&t.classList.remove(e)},t}(),n=function(){function t(t,e){void 0===e&&(e={}),this.option={aToday:"aToday",aYesterday:"aYesterday",aRecent7Days:"aRecent7Days",aRecent14Days:"aRecent14Days",aRecent30Days:"aRecent30Days",aRecent90Days:"aRecent90Days",shortbtn:0,startDate:new Date,endDate:new Date,startCompareDate:"",endCompareDate:"",minValidDate:"315507600",maxValidDate:"",success:function(t){return!0},startDateId:"startDate",startCompareDateId:"startCompareDate",endDateId:"endDate",endCompareDateId:"endCompareDate",target:"",needCompare:!1,suffix:"",inputTrigger:"input_trigger",compareTrigger:"compare_trigger",compareCheckboxId:"needCompare",calendars:2,calendarsChoose:2,dayRangeMax:0,monthRangeMax:12,dateTable:"dateRangeDateTable",selectCss:"dateRangeSelected",compareCss:"dateRangeCompare",coincideCss:"dateRangeCoincide",firstCss:"first",lastCss:"last",clickCss:"today",disableGray:"dateRangeGray",isToday:"dateRangeToday",joinLineId:"joinLine",isSingleDay:!1,defaultText:" 至 ",singleCompare:!1,stopTodayBefore:!1,stopToday:!0,isTodayValid:!0,weekendDis:!1,disCertainDay:[],disCertainDate:[],shortOpr:!1,noCalendar:!1,theme:"ta",magicSelect:!1,autoCommit:!1,autoSubmit:!1,replaceBtn:"btn_compare",singleDateRange:!1},this.days=[],this.calendaState=0,this.boxPosition={inputPosition:{left:0,top:0},bodyHeight:0,bodyWidth:0,inputHeight:0,inputWidth:0,boxHeight:0,boxWidth:0},Object.assign(this.option,e),this.defaultOption(),this.ref=self.document.querySelector("#"+t),this.init(),this.initEvent()}return t.prototype.init=function(){var e=this.option.endDate,i=new Date(e.getFullYear(),e.getMonth(),1),a='<select class="select-year">\n                '+t.getSelectYear(i.getFullYear()).map(function(t){return'<option value="'+t+'">'+t+"</option>"}).join("")+"\n            </select>",n='<select class="select-month">\n                '+[1,2,3,4,5,6,7,8,9,10,11,12].map(function(t){return'<option value="'+(t-1)+'">'+t+"</option>"}).join("")+"\n            </select>",o='<div class="picker">\n                <div class="picker-body">\n                    <div class="picker-nav">\n                        <a href="javascript:void 0" class="nav-reduce">上</a>\n                        <a href="javascript:void 0" class="nav-add">下</a>\n                        <p class="picker-date">\n                            '+a+"年"+n+'月\n                        </p>\n                    </div>\n                    <div class="picker-week">\n                        '+["一","二","三","四","五","六","日"].map(function(t){return'<span class="week-item">'+t+"</span>"}).join("")+'\n                    </div>\n                    <div class="picker-day"></div>\n                </div>\n                '+(2!=this.option.calendars&&this.option.isSingleDay?"":'<div class="picker-footer">\n                <button class="picker-btn-yes">确定</button>\n                <button class="picker-btn-no">取消</button>\n            </div>')+"\n            </div>";this.ref.readOnly=!0,this.setValue({startDate:this.option.startDate,endDate:this.option.endDate}),this.boxRef=self.document.createElement("div"),this.boxRef.innerHTML=o,this.boxRef.style.position="absolute",s(this.boxRef,this.ref),this.navAddRef=this.boxRef.querySelector(".nav-add"),this.navReduce=this.boxRef.querySelector(".nav-reduce"),this.btnYesRef=this.boxRef.querySelector(".picker-btn-yes"),this.btnNoRef=this.boxRef.querySelector(".picker-btn-no"),this.selectYearRef=this.boxRef.querySelector(".select-year"),this.selectMonthRef=this.boxRef.querySelector(".select-month"),this.pickerDayRef=this.boxRef.querySelector(".picker-day"),this.getFillDays(),this.boxRef.style.display="block",this.boxPosition.boxHeight=this.boxRef.clientHeight,this.boxPosition.boxWidth=this.boxRef.clientWidth,this.boxRef.style.display="none",this.setPosition()},t.prototype.defaultOption=function(){this.option.startDate||(this.option.startDate=new Date),2!=this.option.calendars&&this.option.isSingleDay?this.option.endDate||(this.option.endDate=this.option.startDate):this.option.endDate||(this.option.endDate=new Date),"string"==typeof this.option.startDate&&(this.option.startDate=new Date(this.option.startDate)),"string"==typeof this.option.endDate&&(this.option.endDate=new Date(this.option.endDate)),this.option.date=new Date(this.option.endDate)},t.prototype.initEvent=function(){var t=this;this.windowEvent=a.listen("window","click",function(e){e.target===t.ref||t.pickerDayRef.contains(e.target)||t.boxRef.contains(e.target)||t.close()}),window.onresize=function(){t.setPosition()},this.ref&&this.ref.addEventListener("click",function(){t.show()}),this.pickerDayRef&&this.pickerDayRef.addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),e.target.parentNode==t.pickerDayRef){var i=e.target.dataset.index,s=t.days[i];s.disabled||t.selected(s)}}),this.selectYearRef&&this.selectYearRef.addEventListener("change",function(e){t.yearSelect(e.target.value,e.target)}),this.selectMonthRef&&this.selectMonthRef.addEventListener("change",function(e){t.monthSelect(e.target.value,e.target)}),this.navAddRef&&this.navAddRef.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.option.date.calendar(2,1),t.getFillDays()}),this.navReduce&&this.navReduce.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.option.date.calendar(2,-1),t.getFillDays()}),this.btnYesRef&&this.btnYesRef.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.firstDate&&t.secondDate&&(t.ref.value=""+t.firstDate.format+t.option.defaultText+t.secondDate.format,t.option.success({startCompareDate:null,endCompareDate:null,needCompare:null,startDate:t.firstDate.format,endDate:t.secondDate.format}),t.option.startDate=t.firstDate.date,t.option.endDate=t.secondDate.date,t.close())}),this.btnNoRef&&this.btnNoRef.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.close()})},t.prototype.setPosition=function(){var e=t.getPosition(this.ref),i=self.document.body.clientHeight,s=self.document.body.clientWidth,a=this.ref.clientHeight,n=this.ref.clientWidth,o=(this.boxPosition.boxHeight,this.boxPosition.boxWidth);this.boxPosition.inputPosition=e,this.boxPosition.bodyHeight=i,this.boxPosition.bodyWidth=s,this.boxPosition.inputHeight=a,this.boxPosition.inputWidth=n,this.boxRef.style.left="-1px",this.boxRef.style.zIndex="999",e.left+o>s&&(this.boxRef.style.left=1-Math.abs(o-n)+"px")},t.prototype.selected=function(t){switch(this.option.calendars){case 1:this.firstDate=t,this.secondDate=t,this.ref.value=t.format,this.option.success({startCompareDate:null,endCompareDate:null,needCompare:null,startDate:this.firstDate.format,endDate:this.secondDate.format}),this.option.startDate=this.firstDate.date,this.option.endDate=this.secondDate.date,this.close();break;case 2:if(this.firstDate&&this.secondDate&&(this.firstDate=null,this.secondDate=null),this.firstDate){if(this.secondDate=t,t.type="second",this.calendaState=3,this.firstDate.date.getTime()>this.secondDate.date.getTime()){var e=this.firstDate;this.firstDate=this.secondDate,this.secondDate=e}this.changeFillDays()}else this.firstDate=t,t.type="first",t.selected=!0,this.calendaState=2,this.changeFillDays()}},t.prototype.yearSelect=function(t,e){this.option.date.setFullYear(t),this.getFillDays()},t.prototype.monthSelect=function(t,e){this.option.date.setMonth(t),this.getFillDays()},t.getSelectYear=function(t){for(var e=[],i=t-40;i<t+20;i++)e.push(i);return e},t.prototype.changeFillDays=function(){var t=this;this.pickerDayRef&&Array.from(this.pickerDayRef.childNodes).forEach(function(e,i){e.classList.remove("first","second","range","selected");var s=t.days[i].date;t.firstDate&&t.secondDate&&(t.firstDate.date.getTime()==s.getTime()&&(e.classList.add("first"),e.classList.remove("selected")),t.secondDate.date.getTime()==s.getTime()&&(e.classList.add("second"),e.classList.remove("selected")),t.firstDate.date.getTime()<s.getTime()&&t.secondDate.date.getTime()>s.getTime()&&(e.classList.add("range"),e.classList.remove("selected")),t.firstDate.date.getTime()==t.secondDate.date.getTime()&&t.secondDate.date.getTime()==s.getTime()&&(e.classList.remove("first","second","range"),e.classList.add("selected"))),t.firstDate&&!t.secondDate&&t.firstDate.date.getTime()==s.getTime()&&e.classList.add("selected")})},t.prototype.getFillDays=function(){var t=this.option.date,e=new Date(t.getFullYear(),t.getMonth(),1);this.days.length=0;do{var i={year:e.getFullYear(),month:e.getMonth(),day:e.getDate(),week:e.getDay(),date:new Date(e),format:e.formatDate("yyyy-MM-dd")};this.firstDate&&this.secondDate&&(this.firstDate.date.getTime()==e.getTime()&&(i.type="first"),this.secondDate.date.getTime()==e.getTime()&&(i.type="second"),this.firstDate.date.getTime()<e.getTime()&&this.secondDate.date.getTime()>e.getTime()&&(i.type="range"),this.firstDate.date.getTime()==this.secondDate.date.getTime()&&this.secondDate.date.getTime()==e.getTime()&&(i.selected=!0,i.type=null)),this.firstDate&&!this.secondDate&&this.firstDate.date.getTime()==e.getTime()&&(i.selected=!0),this.days.push(i),e.calendar(1,1)}while(1!=e.getDate());var s=this.days[0].week;for(e=new Date(t.getFullYear(),t.getMonth(),1);s>1;)e.calendar(1,-1),this.days.unshift({year:e.getFullYear(),month:e.getMonth(),day:e.getDate(),week:e.getDay(),date:new Date(e),format:e.formatDate("yyyy-MM-dd"),disabled:!0}),s--;var a=this.days[this.days.length-1].week;for(e=new Date(t.getFullYear(),t.getMonth()+1,0);0!=a;)e.calendar(1,1),this.days.push({year:e.getFullYear(),month:e.getMonth(),day:e.getDate(),week:e.getDay(),date:new Date(e),format:e.formatDate("yyyy-MM-dd"),disabled:!0}),++a>6&&(a=0);this.pickerDayRef&&(this.pickerDayRef.innerHTML=this.days.map(function(t,e){return'<span  data-index="'+e+'"  class="day-item'+(t.disabled?" disabled":"")+("first"==t.type?" first":"")+("second"==t.type?" second":"")+("range"==t.type?" range":"")+(t.selected?" selected":"")+'">'+t.day+"</span>"}).join("")),this.selectYearRef&&(this.selectYearRef.value=String(t.getFullYear())),this.selectMonthRef&&(this.selectMonthRef.value=String(t.getMonth()))},t.prototype.show=function(){1!=this.calendaState&&(this.option.date=new Date(this.option.endDate),this.firstDate=t.getPickerDate(this.option.startDate),this.secondDate=t.getPickerDate(this.option.endDate),this.getFillDays(),this.calendaState=1,this.boxRef.style.display="block")},t.prototype.close=function(){this.firstDate=null,this.secondDate=null,this.calendaState=0,this.boxRef.style.display="none"},t.getPickerDate=function(t){return void 0===t&&(t=new Date),{format:t.formatDate("yyyy-MM-dd"),month:t.getMonth(),date:t,year:t.getFullYear(),week:t.getDay(),day:t.getDate()}},t.getPosition=function(t){for(var e=t.offsetTop,i=t.offsetLeft,s=t.offsetParent;null!==s;)i+=s.offsetLeft,e+=s.offsetTop,s=s.offsetParent;return{top:e,left:i}},t.prototype.destroy=function(){this.ref.parentNode.removeChild(this.boxRef),this.windowEvent&&this.windowEvent()},t.prototype.setValue=function(e){this.option.startDate=e.startDate,this.option.endDate=e.endDate,this.defaultOption(),this.firstDate=t.getPickerDate(this.option.startDate),this.secondDate=t.getPickerDate(this.option.endDate),this.getFillDays(),2!=this.option.calendars&&this.option.isSingleDay?this.ref.value=this.secondDate.format:this.ref.value=""+this.firstDate.format+this.option.defaultText+this.secondDate.format},t}();e.PickerDateRange=n,window.pickerDateRange=n},function(t,e){}]);